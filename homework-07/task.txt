Vitalii Hurin, [20.12.19 16:26]
Домашнє завдання №7

Використовуючи напрацювання із завдання №6, розробити HTTP-сервер, що віддає поточний стан оперативної пам'яті.
Код не має використовувати сторонніх бібліотек та фреймворків, лише вбудовані модулі.
У порівнянні з попереднім завданням, користувач має отримувати інформацію в форматі JSON з усіма або лише певними (визначається query параметром) значеннями у мегабайтах округлених до тисячних (три знаки після коми) у вигляді відповіді на HTTP запити:
- загальна кількість пам'яті в системі,
- кількість доступної вільної пам'яті,
- кількість зайнятої пам'яті.

Крім цього, значення межі інформування про малу кількість вільної пам'яті в мегабайтах має теж задаватись відповідним POST запитом та зберігатись у змінній в під час виконання програми.
Якщо кількість вільної пам'яті менше заданого ліміту, то при віддаванні значення вільної пам'яті додатково у відповіді має повертатись повідомлення:
Available memory is under the defined limit
Також кожен запит має супроводжуватись header'ом для базової аутентифікації (basic auth) із зашифронанними в base64 значеннями вашого імені та будь-якого паролю. Наприклад, для імені Vitalii та паролю Test12345 заголовок матиме вигляд Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

Запити, які необхідно реалізувати:

1. Baseurl: /limit
 Method: POST
 Authorization: Basic
 Request body: {"limit": 500}

2. Baseurl: /metrics
 Method: GET
 Authorization: Basic
 Опціонально може включати query параметр filter, що може приймати одне з значень: total, free, allocated. При інших значеннях filter повертати помилку.

Deadline: 18.01.2020 23:59

#important #homework homework-07

Vitalii Hurin, [20.12.19 16:27]
PS: Приклади запитів та відповідей:

URL: http://localhost:3000/limit
Method: POST
Request body: {"limit": 1000}
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху: ++
Response code: 200
Response body:
{
 "message": "Minimum free memory limit is successfully set to 1000 MB"
}
У випадку неправильного параметру (якщо не валідне число): ++
Response code: 400
Response body:
{
 "message": "New value for minimum free memory limit is not valid number"
}
У випадку проблем з авторизацією: ++
Response code: 401
Response body:
{
 "message": "Unauthorized"
}
У випадку інших внутрішніх помилок:
Response code: 500
Response body:
{
 "message": "Internal error occured"
}

URL: http://localhost:3000/metrics ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "OK",
 "total: 8192,
 "free": 1233.571,
 "allocated": 6958.429
}
У випадку неправильного параметру filter (якщо значення не одне з трьох): ++
Response code: 400
Response body:
{
 "message": "Filter value is not valid"
}
У випадку проблем з авторизацією: ++
Response code: 401
Response body:
{
 "message": "Unauthorized"
}
У випадку інших внутрішніх помилок: ++
Response code: 500
Response body:
{
 "message": "Internal error occured"
}

URL: http://localhost:3000/metrics  ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "Available memory is under the defined limit",
 "total: 8192,
 "free": 45.873,
 "allocated": 8146.127
}

URL: http://localhost:3000/metrics?filter=total ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "OK",
 "total: 8192
}

URL: http://localhost:3000/metrics?filter=free ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "OK",
 "free": 645.271
}

URL: http://localhost:3000/metrics?filter=free ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "Available memory is under the defined limit",
 "free": 31.753
}

URL: http://localhost:3000/metrics?filter=allocated ++
Method: GET
Headers: Authorization: Basic Vml0YWxpaTpUZXN0MTIzNDU=

У випадку успіху:
Response code: 200
Response body:
{
 "message": "OK",
 "allocated": 8043.542
}
